<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Dbup - simple migration tool that is written by PHP</title>
  </head>

  <body>
  <header>
      <div class="inner">
          <h1>Dbup</h1>
          <a href="https://travis-ci.org/brtriver/dbup"><img src="https://travis-ci.org/brtriver/dbup.png"></a>

          <h2>simple migration tool with UP only</h2>
          <a href="https://github.com/brtriver/dbup" class="button"><small>View project on</small>GitHub</a>
      </div>
  </header>

  <div id="content-wrapper">
      <div class="inner clearfix" style="margin-bottom: 10px;">
          <a href="./ja/">日本語</a>
      </div>
      <div class="inner clearfix">
          <section id="main-content">
              <iframe src="http://player.vimeo.com/video/65262290" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>

              <h3>Features</h3>

              <p>Dbup is a simple migration tool that is written by PHP.</p>
              <ul>
                  <li>You have only to download <a href="https://raw.github.com/brtriver/dbup/master/dbup.phar">dbup.phar</a>.</li>
                  <li>Dbup has only <code>up</code> command. Dbup does not have <code>down</code> command.</li>
                  <li>Dbup uses just a plain old sql, so you don't have to learn ORM nor DSL. You write sql file and just call up command.</li>
                  <li>Dbup uses just PDO class to migrate.</li>
                  <li>Dbup doesn't need the table of the migration status in a database to do up.</li>
                  <li>Dbup uses <code>.ini</code> format for your database configuration. It is familier to each languages.</li>
              </ul>

              <h3>Requirements</h3>

	      <ul>
		<li>PHP 5.4.0 or later</li>
		<li>PDO extension</li>
	      </ul>

	      <h3>Changelogs</h3>

	      <p><a href="https://github.com/brtriver/dbup/blob/master/CHANGELOG.md">see on github</a></p>

              <h3>Quick Install and Run</h3>
<pre><code>// if you want to get from CLI
$ cd your_repo_root/repo_name
$ wget https://raw.github.com/brtriver/dbup/master/dbup.phar

// initialize dbup
$ php dbup.phar init
$ vi .dbup/properties.ini

// make a migration old plain sql file.
$ vi sql/V1__sample_select.sql
$ php dbup.phar status
$ php dbup.phar up --dry-run
$ php dbup.phar up
</code></pre>

              <h3>Install</h3>

              <p>
                  Installing Dbup is as easy as it can get. Download the dbup.phar and run init, then <code>.dbup</code> and <code>sql</code> directory are created and set a sample <code>properties.ini</code> file and sql files.
              </p>
<pre><code>$ php dbup.phar init
</code></pre>
              <p>
                  change the database config in .dbup/properties.ini.
              </p>
<pre><code>[pdo]
dsn = "mysql:dbname=testdatabase;host=localhost"
user = "testuser"
password = "testpassword"
</code></pre>
              <p>
                  see also <a href="http://www.php.net/manual/en/pdo.construct.php">PHP PDO document</a>
              </p>

              <h3>Naming for migration sql files</h3>

              <p>You have to name a sql file like below:</p>

              <pre><code>V[version_number]__[description].sql</code></pre>
              <p>V is prefix. the separator is __ (two underscores). Suffix is .sql</p>

              <h3>Usage</h3>
              <p>List all commands.</p>

              <pre><code>$ php dbup.phar</code></pre>
              <p>You have to write a sql file to sql directory.</p>

              <p>Show status.</p>

              <pre><code>$ php dbup.phar status</code></pre>

<pre><code>dbup migration status
================================================================================
Applied At | migration sql file
--------------------------------------------------------------------------------
2013-05-01 22:37:32 | V1__sample_select.sql
appending... | V2__sample.sql
appending... | V3__sample.sql
appending... | V20__sample.sql
appending... | V100__sample.sql
</code></pre>

              <p>update database after writing a new sql file.</p>

              <pre><code>$ php dbup.phar up</code></pre>

              <p>that's all. simple.</p>

              <h3>How check status ?</h3>
              
              <p>
              When you run <code>up</code> command, the sql file will be copied to <code>.dbup/applied</code> directory.
              Dbup compares with <code>.dbup/applied</code> and <code>sql</code> directory whether the sql file has done or not.
              If the same name files exist in both directories, <code>up</code> command ignores this file as being applied.
              </p>
              
              <p>
              In other words, If you copy the sql file to <code>.dbup/applied</code> directory manualy, this sql file is ignored.
              And If you delete the sql from <code>.dbup/applied</code> directory manualy, this sql file will be used agein.
              </p>
              
              <h3>With git</h3>
              
              <p>
                If you manage your project by git or want not to share applied statuses, you have to add <code>.dbap/applied/*</code> in <code>.gitignore</code>.
              </p>
              
	      <h3>Warning</h3>
	      <p>
		Dbup is not stable now so before you use dbup in your production, it is necessary to test enough in devlopment or staging environment.
	      </p>

              <h3>Author</h3>
              <ul>
                  <li><a href="https://twitter.com/brtriver">@brtriver</a></li>
              </ul>

              <h3>Links</h3>
              <ul>
                <li><a href="https://github.com/brtriver/dbup">github</a></li>
                <li><a href="https://travis-ci.org/brtriver/dbup">travis CI</a></li>
                <li><a href="https://packagist.org/packages/brtriver/dbup">Packagist</a></li>
              </ul>

              <h3>License</h3>
              <p>Dbup is licensed under the MIT license.</p>

       </section>

        <aside id="sidebar">

          <a href="https://raw.github.com/brtriver/dbup/master/dbup.phar" class="button">
            <small>Download</small>
            dbup.phar file
          </a>

	  <h2>Latest Version</h2>
	  <p>
	    <a href="https://raw.github.com/brtriver/dbup/master/dbup.phar">
	      <span style="font-size: 1.4em;">v0.4 (2013-05-09)</span>
	    </a>
	    <a href="https://github.com/brtriver/dbup/blob/master/CHANGELOG.md">[changelog]</a>
	  </p>

          <p class="repo-owner"><a href="https://github.com/brtriver/dbup"></a> is maintained by <a href="https://github.com/brtriver">brtriver</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40597905-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
